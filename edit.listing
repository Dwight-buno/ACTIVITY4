{% extends 'base.html' %}

{% block title %}Edit Listing - The Helping Hand{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container" style="max-width: 600px; margin-top: 2rem;">
        <h2>✏️ Edit Listing</h2>

        <!-- Display errors if any -->
        {% if errors %}
        <div class="alert alert-danger">
            <ul>
                {% for error in errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <form method="POST" action="{{ url_for('edit_listing', id=listing.id) }}" enctype="multipart/form-data">
            {{ form.hidden_tag() }}

            <!-- Title -->
            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" id="title" name="title" required value="{{ listing.title }}" placeholder="Enter title" class="form-control">
            </div>

            <!-- Category -->
            <div class="form-group">
                <label for="category">Category</label>
                <select id="category" name="category" required class="form-control">
                    <option value="Skills & Services" {% if listing.category == 'Skills & Services' %}selected{% endif %}>Skills & Services</option>
                    <option value="Items & Resources" {% if listing.category == 'Items & Resources' %}selected{% endif %}>Items & Resources</option>
                </select>
            </div>

            <!-- Listing Type -->
            <div class="form-group">
                <label for="listing_type">Type</label>
                <select id="listing_type" name="listing_type" required class="form-control">
                    <option value="Offering" {% if listing.listing_type == 'Offering' %}selected{% endif %}>Offering</option>
                    <option value="Requesting" {% if listing.listing_type == 'Requesting' %}selected{% endif %}>Requesting</option>
                </select>
            </div>

            <!-- Description -->
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" required class="form-control" placeholder="Describe your listing">{{ listing.description }}</textarea>
            </div>

            <!-- Location -->
            <div class="form-group">
                <label for="location">Location (Optional)</label>
                <input type="text" id="location" name="location" value="{{ listing.location or '' }}" class="form-control" placeholder="Enter location if applicable">
                <small class="form-text text-muted">Leave blank if not applicable</small>
            </div>

            <!-- Tags -->
            <div class="form-group">
                <label for="tags">Tags (Optional)</label>
                <input type="text" id="tags" name="tags" value="{{ listing.tags or '' }}" class="form-control" placeholder="e.g., tutoring, electronics, volunteering">
                <small class="form-text text-muted">Separate tags with commas</small>
            </div>

            <!-- Image Upload -->
            <div class="form-group">
                <label for="image">Upload Image (Optional)</label>
                <input type="file" id="image" name="image" accept="image/*" class="form-control">
                {% if listing.image_url %}
                    <small class="fo
